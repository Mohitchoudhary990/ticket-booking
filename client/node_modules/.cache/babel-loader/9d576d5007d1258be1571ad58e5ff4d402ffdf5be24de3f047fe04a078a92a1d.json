{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Mohit\\\\OneDrive\\\\Desktop\\\\ticket-booking\\\\client\\\\src\\\\pages\\\\MyBookings.js\",\n  _s = $RefreshSig$();\n// import React, { useEffect, useState } from \"react\";\n// import API from \"../services/api\";\n// import \"../styles/MyBookings.css\";\n\n// const MyBookings = () => {\n//   const [bookings, setBookings] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [error, setError] = useState(null);\n\n//   useEffect(() => {\n//     setLoading(true);\n//     API.get(\"/bookings/my\")\n//       .then((res) => {\n//         console.log(\"Bookings fetched:\", res.data);\n//         setBookings(res.data);\n//         setError(null);\n//       })\n//       .catch((err) => {\n//         console.error(\"Error fetching bookings:\", err);\n//         setError(err.message);\n//         setLoading(false);\n//       })\n//       .finally(() => setLoading(false));\n//   }, []);\n\n//   if (loading) return <div className=\"loading-text\">‚è≥ Loading your bookings...</div>;\n//   if (error) return <div className=\"error-text\">‚ùå Error: {error}</div>;\n\n//   if (bookings.length === 0) {\n//     return (\n//       <div className=\"bookings-container\">\n//         <h2>üìã My Bookings</h2>\n//         <div className=\"no-bookings\">\n//           üé´ You haven't booked any tickets yet. Start exploring events!\n//         </div>\n//       </div>\n//     );\n//   }\n\n//   const handleCancelBooking = async (bookingId) => {\n//     if (window.confirm(\"Are you sure you want to cancel this booking?\")) {\n//       try {\n//         await API.post(`/bookings/${bookingId}/cancel`);\n//         setBookings(bookings.filter(b => b._id !== bookingId));\n//         alert(\"‚úÖ Booking cancelled successfully!\");\n//       } catch (err) {\n//         alert(\"‚ùå Failed to cancel booking: \" + (err.response?.data?.message || err.message));\n//       }\n//     }\n//   };\n\n//   return (\n//     <div className=\"bookings-container\">\n//       <h2>üìã My Bookings</h2>\n//       <div className=\"bookings-list\">\n//         {bookings.map((booking) => (\n//           <div key={booking._id} className=\"booking-item\">\n//             <h3>{booking.event?.title || \"Event\"}</h3>\n\n//             <div className=\"booking-detail\">\n//               <span className=\"booking-label\">üìÖ Date</span>\n//               <span className=\"booking-value\">\n//                 {booking.event?.date \n//                   ? new Date(booking.event.date).toLocaleDateString('en-IN', { \n//                       year: 'numeric', \n//                       month: 'short', \n//                       day: 'numeric' \n//                     })\n//                   : 'N/A'}\n//               </span>\n//             </div>\n\n//             <div className=\"booking-detail\">\n//               <span className=\"booking-label\">üé´ Seats Booked</span>\n//               <span className=\"booking-value\">{booking.seatsBooked}</span>\n//             </div>\n\n//             <div className=\"booking-detail\">\n//               <span className=\"booking-label\">üí∞ Total Amount</span>\n//               <span className=\"booking-value\">‚Çπ{booking.totalAmount.toLocaleString()}</span>\n//             </div>\n\n//             <div className=\"booking-detail\">\n//               <span className=\"booking-label\">‚è∞ Booked On</span>\n//               <span className=\"booking-value\">\n//                 {new Date(booking.createdAt).toLocaleDateString('en-IN', { \n//                   year: 'numeric', \n//                   month: 'short', \n//                   day: 'numeric',\n//                   hour: '2-digit',\n//                   minute: '2-digit'\n//                 })}\n//               </span>\n//             </div>\n\n//             <div className={`booking-status ${booking.status === 'CONFIRMED' ? 'status-confirmed' : 'status-cancelled'}`}>\n//               {booking.status === 'CONFIRMED' ? '‚úÖ Confirmed' : '‚ùå Cancelled'}\n//             </div>\n\n//             {booking.status === 'CONFIRMED' && (\n//               <button \n//                 className=\"cancel-btn\"\n//                 onClick={() => handleCancelBooking(booking._id)}\n//               >\n//                 Cancel Booking\n//               </button>\n//             )}\n//           </div>\n//         ))}\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default MyBookings;\nimport React, { useEffect, useState } from \"react\";\nimport API from \"../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MyBookings = () => {\n  _s();\n  const [bookings, setBookings] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const fetchBookings = async () => {\n    try {\n      const res = await API.get(\"/bookings/my\");\n      setBookings(res.data);\n      setLoading(false);\n    } catch (error) {\n      console.error(error);\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchBookings();\n  }, []);\n  const handleCancel = async bookingId => {\n    const confirmCancel = window.confirm(\"Are you sure you want to cancel this booking?\");\n    if (!confirmCancel) return;\n    try {\n      await API.delete(`/bookings/${bookingId}`);\n      alert(\"Booking cancelled successfully\");\n      fetchBookings(); // refresh UI\n    } catch (error) {\n      var _error$response, _error$response$data;\n      alert(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Cancel failed\");\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading bookings...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"My Bookings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this), bookings.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No bookings found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 33\n    }, this), bookings.map(booking => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: \"1px solid #ccc\",\n        padding: \"10px\",\n        margin: \"10px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: booking.event.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Seats: \", booking.seatsBooked]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Amount: \\u20B9\", booking.totalAmount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Status: \", booking.status]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }, this), booking.status === \"CONFIRMED\" && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleCancel(booking._id),\n        children: \"Cancel Booking\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }, this)]\n    }, booking._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 157,\n    columnNumber: 5\n  }, this);\n};\n_s(MyBookings, \"PE5FI0kJoD0YQqBBR2XHHfm8FkE=\");\n_c = MyBookings;\nexport default MyBookings;\nvar _c;\n$RefreshReg$(_c, \"MyBookings\");","map":{"version":3,"names":["React","useEffect","useState","API","jsxDEV","_jsxDEV","MyBookings","_s","bookings","setBookings","loading","setLoading","fetchBookings","res","get","data","error","console","handleCancel","bookingId","confirmCancel","window","confirm","delete","alert","_error$response","_error$response$data","response","message","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","booking","style","border","padding","margin","event","title","seatsBooked","totalAmount","status","onClick","_id","_c","$RefreshReg$"],"sources":["C:/Users/Mohit/OneDrive/Desktop/ticket-booking/client/src/pages/MyBookings.js"],"sourcesContent":["// import React, { useEffect, useState } from \"react\";\r\n// import API from \"../services/api\";\r\n// import \"../styles/MyBookings.css\";\r\n\r\n// const MyBookings = () => {\r\n//   const [bookings, setBookings] = useState([]);\r\n//   const [loading, setLoading] = useState(true);\r\n//   const [error, setError] = useState(null);\r\n\r\n//   useEffect(() => {\r\n//     setLoading(true);\r\n//     API.get(\"/bookings/my\")\r\n//       .then((res) => {\r\n//         console.log(\"Bookings fetched:\", res.data);\r\n//         setBookings(res.data);\r\n//         setError(null);\r\n//       })\r\n//       .catch((err) => {\r\n//         console.error(\"Error fetching bookings:\", err);\r\n//         setError(err.message);\r\n//         setLoading(false);\r\n//       })\r\n//       .finally(() => setLoading(false));\r\n//   }, []);\r\n\r\n//   if (loading) return <div className=\"loading-text\">‚è≥ Loading your bookings...</div>;\r\n//   if (error) return <div className=\"error-text\">‚ùå Error: {error}</div>;\r\n  \r\n//   if (bookings.length === 0) {\r\n//     return (\r\n//       <div className=\"bookings-container\">\r\n//         <h2>üìã My Bookings</h2>\r\n//         <div className=\"no-bookings\">\r\n//           üé´ You haven't booked any tickets yet. Start exploring events!\r\n//         </div>\r\n//       </div>\r\n//     );\r\n//   }\r\n\r\n//   const handleCancelBooking = async (bookingId) => {\r\n//     if (window.confirm(\"Are you sure you want to cancel this booking?\")) {\r\n//       try {\r\n//         await API.post(`/bookings/${bookingId}/cancel`);\r\n//         setBookings(bookings.filter(b => b._id !== bookingId));\r\n//         alert(\"‚úÖ Booking cancelled successfully!\");\r\n//       } catch (err) {\r\n//         alert(\"‚ùå Failed to cancel booking: \" + (err.response?.data?.message || err.message));\r\n//       }\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"bookings-container\">\r\n//       <h2>üìã My Bookings</h2>\r\n//       <div className=\"bookings-list\">\r\n//         {bookings.map((booking) => (\r\n//           <div key={booking._id} className=\"booking-item\">\r\n//             <h3>{booking.event?.title || \"Event\"}</h3>\r\n\r\n//             <div className=\"booking-detail\">\r\n//               <span className=\"booking-label\">üìÖ Date</span>\r\n//               <span className=\"booking-value\">\r\n//                 {booking.event?.date \r\n//                   ? new Date(booking.event.date).toLocaleDateString('en-IN', { \r\n//                       year: 'numeric', \r\n//                       month: 'short', \r\n//                       day: 'numeric' \r\n//                     })\r\n//                   : 'N/A'}\r\n//               </span>\r\n//             </div>\r\n\r\n//             <div className=\"booking-detail\">\r\n//               <span className=\"booking-label\">üé´ Seats Booked</span>\r\n//               <span className=\"booking-value\">{booking.seatsBooked}</span>\r\n//             </div>\r\n\r\n//             <div className=\"booking-detail\">\r\n//               <span className=\"booking-label\">üí∞ Total Amount</span>\r\n//               <span className=\"booking-value\">‚Çπ{booking.totalAmount.toLocaleString()}</span>\r\n//             </div>\r\n\r\n//             <div className=\"booking-detail\">\r\n//               <span className=\"booking-label\">‚è∞ Booked On</span>\r\n//               <span className=\"booking-value\">\r\n//                 {new Date(booking.createdAt).toLocaleDateString('en-IN', { \r\n//                   year: 'numeric', \r\n//                   month: 'short', \r\n//                   day: 'numeric',\r\n//                   hour: '2-digit',\r\n//                   minute: '2-digit'\r\n//                 })}\r\n//               </span>\r\n//             </div>\r\n\r\n//             <div className={`booking-status ${booking.status === 'CONFIRMED' ? 'status-confirmed' : 'status-cancelled'}`}>\r\n//               {booking.status === 'CONFIRMED' ? '‚úÖ Confirmed' : '‚ùå Cancelled'}\r\n//             </div>\r\n\r\n//             {booking.status === 'CONFIRMED' && (\r\n//               <button \r\n//                 className=\"cancel-btn\"\r\n//                 onClick={() => handleCancelBooking(booking._id)}\r\n//               >\r\n//                 Cancel Booking\r\n//               </button>\r\n//             )}\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default MyBookings;\r\nimport React, { useEffect, useState } from \"react\";\r\nimport API from \"../services/api\";\r\n\r\nconst MyBookings = () => {\r\n  const [bookings, setBookings] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchBookings = async () => {\r\n    try {\r\n      const res = await API.get(\"/bookings/my\");\r\n      setBookings(res.data);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchBookings();\r\n  }, []);\r\n\r\n  const handleCancel = async (bookingId) => {\r\n    const confirmCancel = window.confirm(\r\n      \"Are you sure you want to cancel this booking?\"\r\n    );\r\n\r\n    if (!confirmCancel) return;\r\n\r\n    try {\r\n      await API.delete(`/bookings/${bookingId}`);\r\n      alert(\"Booking cancelled successfully\");\r\n      fetchBookings(); // refresh UI\r\n    } catch (error) {\r\n      alert(error.response?.data?.message || \"Cancel failed\");\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Loading bookings...</p>;\r\n\r\n  return (\r\n    <div>\r\n      <h2>My Bookings</h2>\r\n\r\n      {bookings.length === 0 && <p>No bookings found.</p>}\r\n\r\n      {bookings.map((booking) => (\r\n        <div\r\n          key={booking._id}\r\n          style={{ border: \"1px solid #ccc\", padding: \"10px\", margin: \"10px\" }}\r\n        >\r\n          <h3>{booking.event.title}</h3>\r\n\r\n          <p>Seats: {booking.seatsBooked}</p>\r\n          <p>Amount: ‚Çπ{booking.totalAmount}</p>\r\n          <p>Status: {booking.status}</p>\r\n\r\n          {booking.status === \"CONFIRMED\" && (\r\n            <button onClick={() => handleCancel(booking._id)}>\r\n              Cancel Booking\r\n            </button>\r\n          )}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyBookings;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}